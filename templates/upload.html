<!doctype html>


<html>

<head>
    <title>Style Transfer</title>
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/base/jquery-ui.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="{{url_for('static', filename ='css/frame.css')}}" media="screen" rel="stylesheet" type="text/css" />
    <link href="{{url_for('static', filename ='css/controls.css')}}" media="screen" rel="stylesheet" type="text/css" />
    <link href="{{url_for('static', filename ='css/frame.css')}}" media="screen" rel="stylesheet" type="text/css" />
    <link href="{{url_for('static', filename ='css/custom.css')}}" media="screen" rel="stylesheet" type="text/css" />
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com">

    <link href = "{{url_for('static', filename = 'css/bootstrap.css')}}" media="screen" rel="stylesheet" type="text/css" />
		
  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  	<script src="{{url_for('static', filename = 'js/bootstrap.js')}}"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    
   



</head>

<body>
    <div class="menu-container">
        {% include "menu.html" %}
    </div>

    <div class="content-container">
        <div class="content">
            <div class="content-table flex-column">

                    <div class="flex-item flex-column">
                        <h2 class="add-top-margin">How to use</h2>
                        <hr>

                        <p class="text">
                            Transferring your image to one of the fascinating pre-defined styles is very simple, follow the
                            instructions as follows:
                        </p>

                        <ul>
                  				<li>
                  					Browse the GALLERY section carefully and decide your favorite style
                  				</li>
                          <li>
                  					Click on the grey “Choose File” button to open your file explorer,
                            and select the image that you want to transfer from your local disks
                  				</li>
                          <li>
                  					Select the desired style type from the dropdown
                  				</li>
                          <li>
                  					Click the “Submit” button to start the transfer process
                  			  </li>
                  			</ul>
                    </div>
                </div>

                <!---------dropdown----------------------------------------------------------------------------------->
                <div class="flex-row">
                    <div class="flex-item flex-column">
                        <h2 class="add-top-margin">Transfer to our styles</h2>
                        <hr>
                        {% with messages = get_flashed_messages(with_categories=true) %}
                            {% if messages %}
                                {% for category, message in messages %}
                                <div class="alert alert-{{ category }}" role="alert"> {{ message }}</div>
                                {% endfor %}
                            {% endif %}
                            {% endwith %}
                        <form method="Post" action="/upload" enctype="multipart/form-data">

                            <div class="custom-file">
                                <input type="file" accept="image/*" onchange="loadFile(event)" name="file"/>

                                <img id = "imgInp"  width="200px" height="200px"/>
                                <script>
                                    var loadFile = function(event) {
                                        var imgInp = document.getElementById('imgInp');
                                        imgInp.src = URL.createObjectURL(event.target.files[0]);
                                        imgInp.onload = function() {
                                        URL.revokeObjectURL(imgInp.src)
                                        }
                                    };
                                </script>
                            </div>

                            <p class="text">
                                Select from our privided styles below:
                            </p>

                            <div class="form-group">
                                <div class="input-group">
                                    <span class="input-group-addon">Please select</span>
                                        <select name="style_select" class="selectpicker form-control">
                                            <!-- {% for o in data %}
                                            <option value="{{ o.name }}">{{ o.name }}</option>
                                            {% endfor %} -->
                                            <option value="blank">--Please Select--</option>
                                            <option value="monet">monet</option>
                                            <option value="vangogh">vangogh</option>
                                            <option value="ukiyoe">ukiyoe</option>
                                            <option value="afremov">afremov</option>
                                            <option value="edgar">edgar</option>
                                            <option value="chinese">chinese ink</option>
                                            <option value="cezanne">cezanne</option>
                                            <option value="albrecht">albrecht</option>
                                        </select>
                                </div>
                                </div>
                            <p>
                                <input type="submit" value="Submit">
                            </p>


                        </form>

                    </div>
                </div>

                <div class="flex-row">
                  <div class="flex-item flex-column">
                      <h2 class="add-top-margin">Result of Transformation</h2>
                      <hr>
                      <div class="custom-file">
                          <img src="{{resultpath}}" id= "result" >


                           <script type="text/javascript">

                              var resultsrc = "{{resultpath}}";
                              if (resultsrc == ""){
                                  document.getElementById("result").src = "{{url_for('static', filename ='img/dummy.jpg')}}";
                              }
                              else{
                                  document.getElementById("result").src = resultsrc;
                              }
                          </script>
                      </div>
                  </div>
                </div>


                <div class="flex-row">
                    <div class="flex-item flex-column">
                        <h2 class="add-top-margin">The principles behind this functionality (for your interest)</h2>
                        <hr>

                        <p class="text">
                            This functionality is implemented according to the CycleGAN model, which was proposed by
                            Jun-Yan Zhu and his colleagues [1]. It trains on unpaired images from two source domains.
                            Not like some other inconvenient neural style transfer algorithm, the advantage is that it is
                            very flexible and avoids the requirement of paired images as training data.
                        </p>
                        <img class="image no-top-margin center add-top-margin-small"
                                                   src="{{url_for('static', filename ='pics/cnn_sample/cycgan_img.jpg')}}">
                        <p class="text">
                            As illustrated in the above figure [1], X and Y are two domains, with two mapping G: from X to Y
                            and F: from Y to X. Dx and Dy are two adversarial discriminators, where Dx can discriminate
                            image x from translated image F(y) and Dy can do the inverse. Two directions of mapping can be
                            trained at the same time. The final trained model can then be used to generate the style
                            transferred image by passing the original image through the network.
                        </p>

                        <small class="text">
                            [1] is referenced from https://arxiv.org/abs/1703.10593.
                        </small>
                    </div>
                </div>

                <!-------------------------------------------------------------------------------------------->
                <div class="flex-row">
                    <div class="flex-item flex-column">
                        <h2 class="add-top-margin">Dialog Button and Box</h2>
                        <hr>
                        <p class="text">

                        </p>
                        <div class="control-group">
                            <button id="dialog-btn-1" class="custom-button-flat"><img src="{{url_for('static', filename = 'img/setting.png')}}"><span>Dialog 1</span></button>
                            <button id="dialog-btn-2" class="custom-button-flat"><img src="{{url_for('static', filename = 'img/setting.png')}}"><span>Dialog 2</span></button>
                            <button id="dialog-btn-3" class="custom-button-flat"><img src="{{url_for('static', filename = 'img/setting.png')}}"><span>Dialog 3</span></button>
                            <button id="dialog-btn-4" class="custom-button-flat"><img src="{{url_for('static', filename = 'img/setting.png')}}"><span>Dialog 4</span></button>
                            <button id="share-btn" title="Share" class="custom-button-flat"><img src="{{url_for('static', filename = 'img/setting.png')}}"><span>Share</span></button>
                        </div>
                        <div id="dialog-1" title="Dialog 1" data-role="none">
                            <p>No action, attached and centered to the window, full-width button.</p>
                        </div>
                        <div id="dialog-2" title="Dialog 2" data-role="none">
                            <p>With action, attached and centered to the window.</p>
                        </div>
                        <div id="dialog-3" title="Dialog 3" data-role="none">
                            <p>No action and cancel buttons, attached and centered to the content element.</p>
                        </div>
                        <div id="dialog-4" title="Dialog 4" data-role="none">
                            <p>With action, attached and centered to the window, reversed button positions.</p>
                        </div>
                        <div id="share-dialog" title="Share" data-role="none">
                            <p>Copy the following link and share it with others:</p>
                            <input id="share-url" class="custom-textbox" type="text" autofocus="autofocus" value="https://yenchiah.github.io/project-website-template/" readonly>
                            <p id="share-url-copy-prompt">The share link is copied.</p>
                        </div>
                    </div>

                </div>
                <!-------------------------------------------------------------------------------------------->



            </div>
        </div>
        
</body>
</html>
